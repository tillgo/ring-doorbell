<mxfile host="app.diagrams.net" modified="2024-05-01T17:22:13.167Z" agent="Mozilla/5.0 (X11; Linux x86_64; rv:124.0) Gecko/20100101 Firefox/124.0" etag="rK93LPLsqVIa1C5s2TQt" version="24.3.1" type="device">
  <diagram name="Page-1" id="Q3mBGWrwZ0WqKtqV44Mk">
    <mxGraphModel dx="1414" dy="770" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="oD_Yi28MRMcOgQZIaKZo-1" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Server&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="397" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oD_Yi28MRMcOgQZIaKZo-2" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Web-Client&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="150" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oD_Yi28MRMcOgQZIaKZo-3" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Ring-Door-Bell&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="630" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="oD_Yi28MRMcOgQZIaKZo-4" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Make RIngRing at Web-Client&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="30" y="20" width="540" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-1" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="oD_Yi28MRMcOgQZIaKZo-2" target="oD_Yi28MRMcOgQZIaKZo-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="500" as="sourcePoint" />
            <mxPoint x="280" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-2" value="&lt;div&gt;0. Open&lt;/div&gt;&lt;div&gt;Websocket&lt;/div&gt;&lt;div&gt;&amp;nbsp;Connection&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-1">
          <mxGeometry x="-0.1444" y="1" relative="1" as="geometry">
            <mxPoint x="-1" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-3" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="295" y="760" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-4" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.094;entryY=1.017;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" target="oD_Yi28MRMcOgQZIaKZo-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="760" as="sourcePoint" />
            <mxPoint x="450" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-5" value="1. User rings" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-4">
          <mxGeometry x="-0.0906" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-6" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.175;exitY=-0.033;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.175;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" edge="1" parent="1" source="oD_Yi28MRMcOgQZIaKZo-3" target="oD_Yi28MRMcOgQZIaKZo-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="590" as="sourcePoint" />
            <mxPoint x="450" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-7" value="&lt;div&gt;2. callUser&lt;/div&gt;&lt;div&gt;(userId,&amp;nbsp; signal)&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-6">
          <mxGeometry x="0.041" y="-3" relative="1" as="geometry">
            <mxPoint y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-9" value="" style="endArrow=none;html=1;rounded=0;strokeWidth=3;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="380" as="sourcePoint" />
            <mxPoint x="600" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-10" value="&lt;i&gt;Websocket&lt;/i&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-9">
          <mxGeometry x="-0.0625" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-13" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.175;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="361" y="390" as="sourcePoint" />
            <mxPoint x="361" y="210" as="targetPoint" />
            <Array as="points">
              <mxPoint x="361" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-14" value="&lt;div&gt;3. callUser&lt;/div&gt;&lt;div&gt;(from, name, signal)&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-13">
          <mxGeometry x="0.041" y="-3" relative="1" as="geometry">
            <mxPoint y="38" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-15" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="439.5" y="210" as="sourcePoint" />
            <mxPoint x="439.5" y="397" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-16" value="&lt;div&gt;4. answerCall&lt;/div&gt;&lt;div&gt;(to, signal)&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-15">
          <mxGeometry x="-0.1444" y="1" relative="1" as="geometry">
            <mxPoint x="-1" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-17" value="" style="endArrow=none;html=1;rounded=0;strokeWidth=3;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="473" as="sourcePoint" />
            <mxPoint x="600" y="473" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-18" value="&lt;i&gt;Websocket&lt;/i&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-17">
          <mxGeometry x="-0.0625" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-19" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="457" as="sourcePoint" />
            <mxPoint x="480" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-20" value="&lt;div&gt;5. callAccepted&lt;/div&gt;&lt;div&gt;(signal)&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-19">
          <mxGeometry x="-0.1444" y="1" relative="1" as="geometry">
            <mxPoint x="-1" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-21" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1.006;entryY=0.367;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" edge="1" parent="1" source="oD_Yi28MRMcOgQZIaKZo-3" target="oD_Yi28MRMcOgQZIaKZo-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="530" as="sourcePoint" />
            <mxPoint x="470" y="480" as="targetPoint" />
            <Array as="points">
              <mxPoint x="780" y="660" />
              <mxPoint x="780" y="172" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-22" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;6. callClient&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-21">
          <mxGeometry x="0.1299" y="5" relative="1" as="geometry">
            <mxPoint x="5" y="38" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-23" value="&lt;font color=&quot;#ff6666&quot;&gt;&lt;br&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="ecYn4uSlazqXLzJlbQfl-21">
          <mxGeometry x="0.397" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-24" value="&lt;font color=&quot;#ff6666&quot;&gt;Eventuell müsste der WebClient gar nicht mit seinem Signal antworten, sondern könnte direkt die RingDoorBell anrufen mit dem erhaltenen Signal. Die Frage ist dann allerdings, wie man damit umgeht, wenn der WebClient den anruf ablehnt, die RingDoorBell aber immer noch auf den Anruf wartet. Könnte aber auch über WebSocket geregelt werden (Client schick nachricht, dass er ablehnt)&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="280" y="50" width="440" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ecYn4uSlazqXLzJlbQfl-25" value="&lt;ol&gt;&lt;li&gt;When user opens webclient, WebSocketConnection is opened. (Server saves websocketId of user together with his userid.&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;User rings bell and selects user he want&#39;s to call&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;doorbell sends message to server with id of user to call and own RTC-Id (signal)&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Server checks if there is a websocket connection for give userId, if so server sends message to user with websocket id of doorbell, doorbell info (name) and RTC-Signal/ID of the bell&lt;br&gt; &lt;br&gt;&lt;/li&gt;&lt;li&gt;If user accepts call, web client sends message back to accept the call with id of the bell and its own rtc-signal/id&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Server sends message to bell, that call was accepted with RTC-signal/id of user.&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Doorbell calls User via RTC&lt;br&gt;&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;" style="text;html=1;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="235" y="870" width="545" height="290" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
